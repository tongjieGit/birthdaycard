<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>生日快乐</title>
</head>
<style>

  html,body {
    padding: 0;
    margin: 0;
    width: 100%;
    height:100%;
    /*background-color: pink;*/
    


  }
  .img {
    width: 100%;
    height: 100%;
    background-image: url('./bg.png');
    background-size: 100% 100%; 
  }
  #evolope {
    width: 250px;
    height: 300px;
    background:rgba(0,0,0,0.1);
    color: #000;
    font-size:14px;
    position: absolute;
    left: calc(50% - 125px);
    transition: top 3s;
    top:200px;
    /*animation:mymove 3s ;*/
    /*-webkit-animation:mymove 3s ;*/
    
  }
  /*@keyframes mymove {
    0% {
      margin-top:200px;
    }
    100% {
      margin-top:50px;
    }
   
  }*/
  
  #message {
    font-size:16px;
    padding: 8px 16px;
    line-height: 24px;
    opacity: 0;
    transition:opacity 3s;
    -moz-transition:opacity 3s; /* Firefox 4 */
    -webkit-transition:opacity 3s; /* Safari and Chrome */
    -o-transition:opacity 3s; /* Opera */
  }
  #btn {
    width:100px;
    height: 40px;
    /*border: 1px solid #3377ff;*/
    border-radius: 16px;
    position: absolute;
    left:calc(50% - 50px);
    bottom: 140px;
    text-align: center;
    line-height: 40px;
    /*background: #3377ff;*/
    color: #fff;
  }

</style>
<body>
  <div class="img">
    

  <div id="evolope">
    <div id="message">
      生日快乐,生日快乐,生日快乐生日快乐,生日快乐,生日快乐,生日快乐,生日快乐,生日快乐,生日快乐,生日快乐,
      生日快乐,生日快乐,生日快乐生日快乐,生日快乐,生日快乐,生日快乐,生日快乐,生日快乐,生日快乐,生日快乐
    </div>
  </div>
  <div id="btn"></div>
  <audio src="./music.mp3" id="Jaudio" class="media-audio" autoplay="autoplay" preload loop="loop" hidden="false"></audio>  
    </div>
</body>
</html>
<script>
  


  // png序列图
  class playImg {
    constructor(dom, params) {
      this.params = params || {
        min: 0,
        max: 0,
        index: 0,
        interval: 100,
        path:'',
        nameLen:1,
      }
      this.timer = null;
      this.stopValue = true;
      this.dom = dom;
      this.name = '';
      this.init();
    }
    init() {  
      if (this.dom && document.querySelector(`#${this.dom}`)) {
        this.getName();   
        document.querySelector(`#${this.dom}`).src = `${this.params.path}${this.name}.png`;
        this.autoPlay();    
      }
    }
    getName() {
      this.name = '';
      let dis = this.params.nameLen - this.params.index.toString().length;
      for (let i = 0; i < dis; i++) {
        this.name += '0'
      }
      this.name += this.params.index.toString()
    }
    autoPlay() {
      this.stopValue = false;
      this.timer = setInterval(e => {
        this.params.index =  (this.params.index + 1) % (this.params.max - this.params.min + 1);
        this.getName();
        document.querySelector(`#${this.dom}`).src = `${this.params.path}${this.name}.png`;
      }, this.params.interval)
    }
    stop() {
      clearInterval(this.timer);
      this.stopValue = true
    }
  }
  
  let playbg1 = new playImg('img1', {
      min: 0,
      max: 329,
      index: 0,
      interval: 33,
      path:'./png/blue/blue_',
      nameLen: 5
  });
  let playbg2 = new playImg('img2', {
      min: 0,
      max: 329,
      index: 0,
      interval: 33,
      path:'./png/red/red_',
      nameLen: 5
  });

  document.addEventListener('keydown', event => {
    if (event.keyCode === 13) {
      if (playbg1.stopValue) {
        playbg1.autoPlay();
        playbg2.autoPlay();
      } else {
        playbg1.stop();
        playbg2.stop();
      }
     
    }
  })

  document.querySelector(`#btn`).addEventListener('click', event => {
    document.querySelector(`#message`).style.opacity = 1;
    document.querySelector(`#evolope`).style.top = '50px';
    document.querySelector('#Jaudio').play()
  })

  // console.log(playbg1.init(), 909)
  
 
  // img1 = `./png/blue/blue_${00000 + playbg1.start()}.png`
  // console.log(img1, 'img')

  
</script>